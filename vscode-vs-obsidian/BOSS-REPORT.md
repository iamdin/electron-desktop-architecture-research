# RFC-001: AI Coding Agent + Editor æ¶æ„è®¾è®¡

- **RFC ç¼–å·**: 001
- **æ ‡é¢˜**: AI Coding Agent Chat + Monaco Editor æ¶æ„è®¾è®¡
- **ä½œè€…**: æ¶æ„ç»„
- **çŠ¶æ€**: ğŸŸ¡ Draft
- **åˆ›å»ºæ—¥æœŸ**: 2026-01-19
- **æœ€åæ›´æ–°**: 2026-01-19

---

## æ¦‚è¿°

ä¸€å¥è¯æ€»ç»“ï¼šåŸºäº Electron æ„å»º AI Coding Agent Chat + Monaco Editor æ¡Œé¢åº”ç”¨ï¼Œé‡‡ç”¨æ··åˆè¿›ç¨‹æ¶æ„ï¼ˆUI å•è¿›ç¨‹ + AI ç‹¬ç«‹è¿›ç¨‹ï¼‰ã€‚

---

## åŠ¨æœº

### ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªé¡¹ç›®ï¼Ÿ

1. å¼€å‘è€…éœ€è¦æ›´æ™ºèƒ½çš„ç¼–ç¨‹è¾…åŠ©å·¥å…·
2. ç°æœ‰ AI ç¼–ç¨‹å·¥å…·ï¼ˆCopilotã€Cursorï¼‰ä¸ç¼–è¾‘å™¨è€¦åˆè¿‡ç´§æˆ–åŠŸèƒ½å•ä¸€
3. æˆ‘ä»¬å¸Œæœ›æ‰“é€ ä¸€ä¸ª AI-native çš„ä»£ç ç¼–è¾‘å™¨ä½“éªŒ

### ä¸ºä»€ä¹ˆéœ€è¦æ¶æ„å†³ç­–ï¼Ÿ

åœ¨å¼€å§‹å¼€å‘å‰ï¼Œéœ€è¦ç¡®å®šæ ¸å¿ƒæŠ€æœ¯é€‰å‹ï¼Œé¿å…åæœŸå¤§è§„æ¨¡é‡æ„ã€‚æˆ‘ä»¬å¯¹ VSCode å’Œ Obsidian è¿›è¡Œäº†æ·±å…¥ç ”ç©¶ï¼ˆ35 ç« ç ”ç©¶æ–‡æ¡£ï¼‰ï¼Œä¸ºå†³ç­–æä¾›ä¾æ®ã€‚

---

## ç›®æ ‡

1. **MVP å¯ç”¨**ï¼š3 ä¸ªæœˆå†…äº¤ä»˜å¯ç”¨çš„æ¡Œé¢åº”ç”¨
2. **æ ¸å¿ƒä½“éªŒ**ï¼šæµç•…çš„ AI å¯¹è¯ + ä¸“ä¸šçš„ä»£ç ç¼–è¾‘
3. **å¯æ‰©å±•**ï¼šæ¶æ„é¢„ç•™æ’ä»¶èƒ½åŠ›
4. **è·¨å¹³å°**ï¼šæ”¯æŒ Windows / macOS / Linux

## éç›®æ ‡

1. âŒ æœ¬é˜¶æ®µä¸åš Web ç‰ˆæœ¬
2. âŒ æœ¬é˜¶æ®µä¸åšç§»åŠ¨ç«¯
3. âŒ æœ¬é˜¶æ®µä¸å¯¹å¤–å¼€æ”¾æ’ä»¶ç³»ç»Ÿ
4. âŒ ä¸è¿½æ±‚åŠŸèƒ½å¯¹æ ‡ VSCode

---

## ææ¡ˆ

### 1. è¿›ç¨‹æ¶æ„

> ğŸ“– è¯¦è§ [01-process-architecture.md](./01-process-architecture.md)

**é€‰æ‹©**ï¼šæ··åˆæ¶æ„ï¼ˆUI å•è¿›ç¨‹ + AI ç‹¬ç«‹è¿›ç¨‹ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Main Process                  â”‚
â”‚  - çª—å£ç®¡ç† / åŸç”Ÿèœå• / æ–‡ä»¶ç³»ç»Ÿ        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Renderer Process               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  AI Chat    â”‚  â”‚  Monaco Editor  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â””â”€â”€ æ’ä»¶ç³»ç»Ÿï¼ˆä¸»çº¿ç¨‹å†…è¿è¡Œï¼‰â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚ Worker/IPC
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         AI Agent Worker                  â”‚
â”‚  - AI API è°ƒç”¨ / ä»£ç æ‰§è¡Œ / å‘½ä»¤è¿è¡Œ     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç†ç”±**ï¼š
- AI è¯·æ±‚è€—æ—¶é•¿ï¼ˆç§’çº§ï¼‰ï¼Œç‹¬ç«‹è¿›ç¨‹é¿å…é˜»å¡ UI
- æ’ä»¶åœ¨ä¸»çº¿ç¨‹è¿è¡Œï¼Œå¼€å‘ç®€å•ï¼ˆå­¦ä¹  Obsidianï¼‰
- ä¸éœ€è¦ VSCode é‚£æ ·å¤æ‚çš„å¤šè¿›ç¨‹ IPC

---

### 2. ç¼–è¾‘å™¨å¼•æ“

> ğŸ“– è¯¦è§ [14-editor-engine.md](./14-editor-engine.md)

**é€‰æ‹©**ï¼šMonaco Editor

**ç†ç”±**ï¼š
- äº§å“å®šä½æ˜¯ "AI Coding Agent"ï¼Œä»£ç ç¼–è¾‘æ˜¯æ ¸å¿ƒ
- Monaco ä¸ VSCode ç¼–è¾‘ä½“éªŒä¸€è‡´ï¼Œå¼€å‘è€…ç†Ÿæ‚‰
- è¯­è¨€æ”¯æŒä¸°å¯Œï¼Œå¯å¤ç”¨ VSCode ç”Ÿæ€

```typescript
// AI ä¸ç¼–è¾‘å™¨é›†æˆç¤ºä¾‹
class EditorService {
  applyAIEdit(edit: AICodeEdit): void {
    this.editor.executeEdits('ai-agent', [{
      range: new monaco.Range(...edit.range),
      text: edit.newText,
    }]);
  }
}
```

---

### 3. æ’ä»¶ç³»ç»Ÿ

> ğŸ“– è¯¦è§ [04-plugin-api-design.md](./04-plugin-api-design.md), [05-extension-points.md](./05-extension-points.md)

**é€‰æ‹©**ï¼šå†…éƒ¨æ’ä»¶åŒ–æ¶æ„ï¼Œæš‚ä¸å¯¹å¤–å¼€æ”¾

**ç†ç”±**ï¼š
- å†…éƒ¨æ¨¡å—æ’ä»¶åŒ–æé«˜ä»£ç è´¨é‡
- é¿å…è¿‡æ—©æ‰¿è¯º API
- æ¶æ„é¢„ç•™ï¼Œæœªæ¥å¯å¼€æ”¾

```typescript
// ç®€æ´çš„æ’ä»¶ APIï¼ˆå­¦ä¹  Obsidianï¼‰
interface NeovatePlugin {
  id: string;
  onload(app: NeovateApp): void;
  onunload(): void;
}

interface NeovateApp {
  editor: EditorService;
  chat: ChatService;
  ui: UIService;
}
```

---

### 4. UI å¸ƒå±€

> ğŸ“– è¯¦è§ [08-ui-layout.md](./08-ui-layout.md)

**é€‰æ‹©**ï¼šå›ºå®šä¸‰æ å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¾§è¾¹æ  â”‚    AI Chat       â”‚    Monaco Editor         â”‚
â”‚ (å¯é€‰) â”‚                  â”‚                          â”‚
â”‚ æ–‡ä»¶æ ‘ â”‚  - å¯¹è¯å†å²      â”‚  - ä»£ç ç¼–è¾‘              â”‚
â”‚ æœç´¢   â”‚  - è¾“å…¥æ¡†        â”‚  - Diff é¢„è§ˆ             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç†ç”±**ï¼šåœºæ™¯æ˜ç¡®ï¼ˆChat + Editorï¼‰ï¼Œå›ºå®šå¸ƒå±€é™ä½å¤æ‚åº¦å’Œç”¨æˆ·è®¤çŸ¥è´Ÿæ‹…

---

### 5. çŠ¶æ€ç®¡ç†

> ğŸ“– è¯¦è§ [17-state-management.md](./17-state-management.md)

**é€‰æ‹©**ï¼šZustand

**ç†ç”±**ï¼š
- API ç®€æ´ï¼Œå­¦ä¹ æˆæœ¬ä½
- æ”¯æŒæŒä¹…åŒ–ã€devtools
- æ¯” Redux è½»é‡ï¼Œæ¯”å…¨å±€å˜é‡å¯ç»´æŠ¤

```typescript
const useChatStore = create<ChatState>()(
  persist(
    (set) => ({
      conversations: [],
      sendMessage: async (content) => { /* ... */ },
    }),
    { name: 'chat-storage' }
  )
);
```

---

### 6. AI äº¤äº’æ¨¡å¼

> ğŸ“– è¯¦è§ [21-language-service.md](./21-language-service.md)

**é€‰æ‹©**ï¼šAgent æ¨¡å¼ï¼ˆAI å¯æ‰§è¡Œå¤šæ­¥æ“ä½œï¼Œå¸¦ç¡®è®¤æœºåˆ¶ï¼‰

**ç†ç”±**ï¼šè¿™æ˜¯äº§å“æ ¸å¿ƒå·®å¼‚åŒ–ï¼Œçº¯å¯¹è¯æ¨¡å¼æ— æ³•æ»¡è¶³å¼€å‘è€…éœ€æ±‚

**å®‰å…¨è®¾è®¡**ï¼š
- ä»£ç ä¿®æ”¹ä»¥ Diff å±•ç¤ºï¼Œç”¨æˆ·ç¡®è®¤ååº”ç”¨
- å‘½ä»¤æ‰§è¡Œéœ€è¦æ˜ç¡®æˆæƒ
- æ‰€æœ‰æ“ä½œå¯å›æ»š

---

### 7. å®‰å…¨æ¨¡å‹

> ğŸ“– è¯¦è§ [28-security-model.md](./28-security-model.md)

**é€‰æ‹©**ï¼šç®€å•ç¡®è®¤æœºåˆ¶ï¼ˆMVPï¼‰ï¼Œåç»­æ¼”è¿›åˆ°å®Œæ•´æƒé™ç³»ç»Ÿ

**MVP é˜¶æ®µ**ï¼š
- AI æ‰§è¡Œå‘½ä»¤éœ€ç”¨æˆ·ç¡®è®¤
- æ–‡ä»¶ä¿®æ”¹éœ€ç”¨æˆ·ç¡®è®¤
- æ’ä»¶æš‚ä¸å¯¹å¤–å¼€æ”¾

---

### 8. å¹³å°æ”¯æŒ

> ğŸ“– è¯¦è§ [31-multi-platform.md](./31-multi-platform.md)

**é€‰æ‹©**ï¼šæ¡Œé¢ä¸‰ç«¯ï¼ˆWindows / macOS / Linuxï¼‰

**ç†ç”±**ï¼šElectron åŸç”Ÿæ”¯æŒï¼ŒMVP ä¸“æ³¨æ ¸å¿ƒå¹³å°

---

## æ›¿ä»£æ–¹æ¡ˆ

### è¿›ç¨‹æ¶æ„

| æ–¹æ¡ˆ | æè¿° | ä¸ºä»€ä¹ˆä¸é€‰ |
|------|------|-----------|
| å®Œå…¨å¤šè¿›ç¨‹ | ç±» VSCodeï¼Œæ’ä»¶ä¹Ÿç‹¬ç«‹è¿›ç¨‹ | å¼€å‘å¤æ‚åº¦å¤ªé«˜ï¼ŒMVP é˜¶æ®µæ²¡å¿…è¦ |
| å®Œå…¨å•è¿›ç¨‹ | ç±» Obsidianï¼Œæ‰€æœ‰ä»£ç åŒè¿›ç¨‹ | AI è¯·æ±‚ä¼šé˜»å¡ UI |

### ç¼–è¾‘å™¨å¼•æ“

| æ–¹æ¡ˆ | æè¿° | ä¸ºä»€ä¹ˆä¸é€‰ |
|------|------|-----------|
| CodeMirror 6 | è½»é‡ã€å¯å®šåˆ¶ | è¯­è¨€æ”¯æŒä¸å¦‚ Monacoï¼Œäº§å“å®šä½éœ€è¦ä¸“ä¸šä»£ç ç¼–è¾‘ |
| è‡ªç ” | å®Œå…¨æ§åˆ¶ | æˆæœ¬å¤ªé«˜ï¼Œæ²¡å¿…è¦é‡å¤é€ è½®å­ |

### çŠ¶æ€ç®¡ç†

| æ–¹æ¡ˆ | æè¿° | ä¸ºä»€ä¹ˆä¸é€‰ |
|------|------|-----------|
| Redux | æˆç†Ÿç¨³å®š | æ ·æ¿ä»£ç å¤šï¼Œå¯¹ä¸­ç­‰è§„æ¨¡åº”ç”¨è¿‡é‡ |
| ä¾èµ–æ³¨å…¥ | ç±» VSCode | å¤æ‚åº¦é«˜ï¼Œå­¦ä¹ æˆæœ¬å¤§ |

---

## æœªè§£å†³é—®é¢˜

ä»¥ä¸‹é—®é¢˜éœ€è¦è¿›ä¸€æ­¥è®¨è®ºæˆ–åœ¨å¼€å‘ä¸­éªŒè¯ï¼š

### éœ€è¦å†³ç­–

| # | é—®é¢˜ | é€‰é¡¹ | æ¨è |
|---|------|------|------|
| 1 | AI Worker ä½¿ç”¨ Web Worker è¿˜æ˜¯ Child Processï¼Ÿ | Worker æ›´è½»é‡ / Process æ›´éš”ç¦» | å¾…éªŒè¯ |
| 2 | æ˜¯å¦éœ€è¦æ”¯æŒå¤šçª—å£ï¼Ÿ | æ˜¯ / å¦ | MVP æš‚ä¸æ”¯æŒ |
| 3 | å¯¹è¯å†å²å­˜å‚¨æ ¼å¼ï¼Ÿ | SQLite / JSON æ–‡ä»¶ | å¾…å®š |
| 4 | æ˜¯å¦é›†æˆç»ˆç«¯ï¼Ÿ | é›†æˆ xterm.js / AI ä»£ç†æ‰§è¡Œ / ä¸é›†æˆ | AI ä»£ç† |

### æŠ€æœ¯éªŒè¯

- [ ] Monaco Editor ä¸ React é›†æˆçš„æ€§èƒ½
- [ ] AI æµå¼å“åº”çš„æœ€ä½³å®è·µ
- [ ] Electron è‡ªåŠ¨æ›´æ–°æ–¹æ¡ˆ

---

## å‚è€ƒèµ„æ–™

### ç ”ç©¶æ–‡æ¡£

æ‰€æœ‰è¯¦ç»†ç ”ç©¶ä½äº `research/vscode-vs-obsidian/` ç›®å½•ï¼š

| ç±»åˆ« | æ–‡æ¡£ |
|------|------|
| åŸºç¡€æ¶æ„ | `01-process-architecture.md`, `02-module-system.md`, `03-ipc-communication.md` |
| æ’ä»¶ç³»ç»Ÿ | `04-plugin-api-design.md`, `05-extension-points.md`, `06-plugin-lifecycle.md`, `07-plugin-communication.md` |
| UI ç³»ç»Ÿ | `08-ui-layout.md`, `09-view-system.md`, `10-theme-system.md` |
| äº¤äº’ç³»ç»Ÿ | `11-command-system.md`, `12-keybinding-system.md`, `13-context-menu.md` |
| ç¼–è¾‘å™¨ | `14-editor-engine.md`, `15-editor-extension.md`, `16-decoration-system.md` |
| æ•°æ®çŠ¶æ€ | `17-state-management.md`, `18-settings-system.md`, `19-file-system.md`, `20-cache-persistence.md` |
| å¼€å‘åŠŸèƒ½ | `21-language-service.md`, `22-debug-capability.md`, `23-terminal-integration.md`, `24-search-capability.md`, `25-version-control.md` |
| ç”Ÿæ€ç³»ç»Ÿ | `26-plugin-marketplace.md`, `27-developer-experience.md` |
| å®‰å…¨æ€§èƒ½ | `28-security-model.md`, `29-startup-performance.md`, `30-runtime-performance.md` |
| å¹³å°ä½“éªŒ | `31-multi-platform.md`, `32-internationalization.md`, `33-accessibility.md` |
| ç‰¹è‰²åŠŸèƒ½ | `34-vscode-specific.md`, `35-obsidian-specific.md` |

### å¤–éƒ¨å‚è€ƒ

- [Electron å®˜æ–¹æ–‡æ¡£](https://www.electronjs.org/docs)
- [Monaco Editor](https://microsoft.github.io/monaco-editor/)
- [VSCode æºç ](https://github.com/microsoft/vscode)
- [Obsidian API](https://docs.obsidian.md/)

---

## è®¨è®ºè®°å½•

> æ­¤éƒ¨åˆ†è®°å½• RFC è®¨è®ºè¿‡ç¨‹ä¸­çš„é‡è¦é—®é¢˜å’Œå†³ç­–

### 2026-01-19 åˆç¨¿

- åˆ›å»º RFC åˆç¨¿
- å¾…è€æ¿å®¡é˜…å¹¶å†³ç­–æœªè§£å†³é—®é¢˜

<!--
è®¨è®ºæ¨¡æ¿ï¼š
### YYYY-MM-DD è®¨è®ºä¸»é¢˜
- å‚ä¸è€…ï¼š
- è®¨è®ºå†…å®¹ï¼š
- ç»“è®ºï¼š
-->
