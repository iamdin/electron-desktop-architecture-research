# RFC-001: AI Coding Agent + Editor æ¶æ„è®¾è®¡

| å­—æ®µ | å†…å®¹ |
|------|------|
| **RFC ç¼–å·** | RFC-001 |
| **æ ‡é¢˜** | AI Coding Agent Chat + Monaco Editor æ¶æ„è®¾è®¡ |
| **ä½œè€…** | æ¶æ„ç»„ |
| **çŠ¶æ€** | Draft - å¾…å†³ç­– |
| **åˆ›å»ºæ—¥æœŸ** | 2026å¹´1æœˆ |

---

## æ‘˜è¦

æœ¬ RFC æè¿°äº† AI Coding Agent Chat + Monaco Editor Electron æ¡Œé¢åº”ç”¨çš„æ¶æ„è®¾è®¡æ–¹æ¡ˆã€‚åŸºäºå¯¹ VSCode å’Œ Obsidian ä¸¤ä¸ªæˆç†Ÿ Electron åº”ç”¨çš„æ·±å…¥ç ”ç©¶ï¼ˆå…± 35 ä¸ªæŠ€æœ¯é¢†åŸŸï¼‰ï¼Œæœ¬æ–‡æ¡£æå‡ºäº†å„å…³é”®é¢†åŸŸçš„è®¾è®¡æ–¹æ¡ˆï¼Œå¹¶æ ‡æ³¨éœ€è¦å†³ç­–çš„äº‹é¡¹ã€‚

---

## 1. èƒŒæ™¯ä¸åŠ¨æœº

### 1.1 äº§å“æ„¿æ™¯

æˆ‘ä»¬è®¡åˆ’å¼€å‘ä¸€æ¬¾é¢å‘å¼€å‘è€…çš„ AI è¾…åŠ©ç¼–ç¨‹å·¥å…·ï¼Œæ ¸å¿ƒç‰¹ç‚¹ï¼š

- **AI Chat ç•Œé¢**ï¼šä¸ AI Coding Agent è¿›è¡Œè‡ªç„¶è¯­è¨€äº¤äº’
- **Monaco ä»£ç ç¼–è¾‘å™¨**ï¼šä¸“ä¸šçš„ä»£ç ç¼–è¾‘ä½“éªŒ
- **Electron æ¡Œé¢åº”ç”¨**ï¼šè·¨å¹³å°ï¼ˆWindows / macOS / Linuxï¼‰
- **æœ¬åœ°ä¼˜å…ˆ**ï¼šä»£ç å’Œå¯¹è¯æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°

### 1.2 ç ”ç©¶åŸºç¡€

ä¸ºäº†åšå‡ºåˆç†çš„æ¶æ„å†³ç­–ï¼Œæˆ‘ä»¬å¯¹ä¸¤ä¸ªä»£è¡¨æ€§çš„ Electron åº”ç”¨è¿›è¡Œäº†æ·±å…¥ç ”ç©¶ï¼š

| åº”ç”¨ | å®šä½ | ä»£è¡¨ç‰¹ç‚¹ |
|------|------|----------|
| **VSCode** | ä¸“ä¸šä»£ç ç¼–è¾‘å™¨ | åŠŸèƒ½å®Œå¤‡ã€ä¼ä¸šçº§æ¶æ„ã€ä¸°å¯Œæ’ä»¶ç”Ÿæ€ |
| **Obsidian** | çŸ¥è¯†ç®¡ç†å·¥å…· | è½»é‡å¿«é€Ÿã€æœ¬åœ°ä¼˜å…ˆã€ç¤¾åŒºé©±åŠ¨ |

ç ”ç©¶æˆæœæ±‡æ€»äº `research/vscode-vs-obsidian/` ç›®å½•ï¼Œå…± **35 ç« **ï¼Œæ¶µç›–æ¶æ„ã€æ’ä»¶ã€UIã€ç¼–è¾‘å™¨ã€æ€§èƒ½ã€å®‰å…¨ç­‰å„æ–¹é¢ã€‚

### 1.3 ç ”ç©¶å†…å®¹ç´¢å¼•

| ç±»åˆ« | ç« èŠ‚ | ç ”ç©¶æ–‡æ¡£ |
|------|------|----------|
| **åŸºç¡€æ¶æ„** | 01-03 | `01-process-architecture.md`, `02-module-system.md`, `03-ipc-communication.md` |
| **æ’ä»¶ç³»ç»Ÿ** | 04-07 | `04-plugin-api-design.md`, `05-extension-points.md`, `06-plugin-lifecycle.md`, `07-plugin-communication.md` |
| **UI ç³»ç»Ÿ** | 08-10 | `08-ui-layout.md`, `09-view-system.md`, `10-theme-system.md` |
| **äº¤äº’ç³»ç»Ÿ** | 11-13 | `11-command-system.md`, `12-keybinding-system.md`, `13-context-menu.md` |
| **ç¼–è¾‘å™¨æ ¸å¿ƒ** | 14-16 | `14-editor-engine.md`, `15-editor-extension.md`, `16-decoration-system.md` |
| **æ•°æ®ä¸çŠ¶æ€** | 17-20 | `17-state-management.md`, `18-settings-system.md`, `19-file-system.md`, `20-cache-persistence.md` |
| **å¼€å‘è€…åŠŸèƒ½** | 21-25 | `21-language-service.md`, `22-debug-capability.md`, `23-terminal-integration.md`, `24-search-capability.md`, `25-version-control.md` |
| **ç”Ÿæ€ç³»ç»Ÿ** | 26-27 | `26-plugin-marketplace.md`, `27-developer-experience.md` |
| **å®‰å…¨ä¸æ€§èƒ½** | 28-30 | `28-security-model.md`, `29-startup-performance.md`, `30-runtime-performance.md` |
| **å¹³å°ä¸ä½“éªŒ** | 31-33 | `31-multi-platform.md`, `32-internationalization.md`, `33-accessibility.md` |
| **ç‰¹è‰²åŠŸèƒ½** | 34-35 | `34-vscode-specific.md`, `35-obsidian-specific.md` |

---

## 2. æ ¸å¿ƒæ¶æ„å†³ç­–

### 2.1 è¿›ç¨‹æ¶æ„

> ğŸ“– **å‚è€ƒç ”ç©¶**ï¼š[01-process-architecture.md](./01-process-architecture.md)

#### 2.1.1 æ–¹æ¡ˆå¯¹æ¯”

| æ–¹é¢ | VSCode å¤šè¿›ç¨‹ | Obsidian å•è¿›ç¨‹ |
|------|--------------|----------------|
| **æ¶æ„** | Main + Renderer + Extension Host + å¤šä¸ª Worker | Main + Renderer |
| **æ’ä»¶éš”ç¦»** | ç‹¬ç«‹è¿›ç¨‹ï¼Œå´©æºƒä¸å½±å“ä¸»ç¨‹åº | ä¸»çº¿ç¨‹è¿è¡Œï¼Œå¯èƒ½å¯¼è‡´æ•´ä½“å´©æºƒ |
| **IPC å¼€é”€** | é«˜ï¼ˆåºåˆ—åŒ–/ååºåˆ—åŒ–ï¼‰ | æ— ï¼ˆç›´æ¥è°ƒç”¨ï¼‰ |
| **å¼€å‘å¤æ‚åº¦** | é«˜ï¼ˆéœ€å¤„ç†è¿›ç¨‹é€šä¿¡ï¼‰ | ä½ |
| **è°ƒè¯•éš¾åº¦** | é«˜ï¼ˆå¤šè¿›ç¨‹è°ƒè¯•ï¼‰ | ä½ |

#### 2.1.2 è®¨è®º

**å¤šè¿›ç¨‹çš„ä¼˜åŠ¿**ï¼š
- æ’ä»¶å´©æºƒä¸ä¼šå¯¼è‡´æ•´ä¸ªåº”ç”¨å´©æºƒï¼Œç”¨æˆ·ä½“éªŒæ›´ç¨³å®š
- å¯ä»¥åˆ©ç”¨å¤šæ ¸ CPUï¼ŒExtension Host ä¸é˜»å¡ UI
- VSCode è¯æ˜äº†è¿™ç§æ¶æ„åœ¨å¤§è§„æ¨¡åœºæ™¯ä¸‹çš„å¯è¡Œæ€§

**å¤šè¿›ç¨‹çš„åŠ£åŠ¿**ï¼š
- IPC é€šä¿¡å¸¦æ¥å»¶è¿Ÿå’Œå¤æ‚æ€§
- å¼€å‘å’Œè°ƒè¯•æˆæœ¬æ˜¾è‘—å¢åŠ 
- å¯¹äºç®€å•åº”ç”¨å¯èƒ½è¿‡åº¦å·¥ç¨‹åŒ–

**å•è¿›ç¨‹çš„ä¼˜åŠ¿**ï¼š
- å®ç°ç®€å•ï¼Œå¼€å‘æ•ˆç‡é«˜
- æ—  IPC å¼€é”€ï¼Œè°ƒç”¨å»¶è¿Ÿä½
- Obsidian è¯æ˜äº†å•è¿›ç¨‹å¯ä»¥æ”¯æ’‘æ•°åƒæ’ä»¶

**å•è¿›ç¨‹çš„åŠ£åŠ¿**ï¼š
- æ’ä»¶ä»£ç è´¨é‡ç›´æ¥å½±å“åº”ç”¨ç¨³å®šæ€§
- è®¡ç®—å¯†é›†ä»»åŠ¡ä¼šé˜»å¡ UI

**AI Agent çš„ç‰¹æ®Šè€ƒè™‘**ï¼š
- AI è¯·æ±‚é€šå¸¸éœ€è¦æ•°ç§’åˆ°æ•°åç§’
- æµå¼å“åº”éœ€è¦æŒç»­æ›´æ–° UI
- å¯èƒ½éœ€è¦æ‰§è¡Œä»£ç ã€è¿è¡Œå‘½ä»¤ç­‰è€—æ—¶æ“ä½œ

#### 2.1.3 é¢„æƒ³è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Main Process                      â”‚
â”‚  - çª—å£ç®¡ç†                                          â”‚
â”‚  - åŸç”Ÿèœå•                                          â”‚
â”‚  - æ–‡ä»¶ç³»ç»Ÿè®¿é—®                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ Electron IPC
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Renderer Process                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   AI Chat    â”‚  â”‚      Monaco Editor           â”‚ â”‚
â”‚  â”‚   Component  â”‚  â”‚                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â”‚ æ’ä»¶ç³»ç»Ÿ (ä¸»çº¿ç¨‹å†…è¿è¡Œ)                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ MessagePort / Worker
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              AI Agent Worker (ç‹¬ç«‹çº¿ç¨‹/è¿›ç¨‹)          â”‚
â”‚  - AI API è°ƒç”¨                                       â”‚
â”‚  - ä»£ç æ‰§è¡Œæ²™ç®±                                       â”‚
â”‚  - å‘½ä»¤æ‰§è¡Œ                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è®¾è®¡ç†ç”±**ï¼š
1. UI å’Œæ’ä»¶å…±ç”¨ Renderer è¿›ç¨‹ï¼Œä¿æŒç®€å•
2. AI Agent ç‹¬ç«‹è¿è¡Œï¼Œé¿å…é˜»å¡ UI
3. ä½¿ç”¨ Web Worker æˆ– Child Processï¼Œæ ¹æ®éœ€è¦é€‰æ‹©

#### 2.1.4 å†³ç­–ç‚¹

| é€‰é¡¹ | æè¿° | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| **A. å®Œå…¨å¤šè¿›ç¨‹** | ç±»ä¼¼ VSCodeï¼Œæ’ä»¶ä¹Ÿç‹¬ç«‹è¿›ç¨‹ | è¿½æ±‚æè‡´ç¨³å®šæ€§ |
| **B. å®Œå…¨å•è¿›ç¨‹** | ç±»ä¼¼ Obsidianï¼Œæ‰€æœ‰ä»£ç åŒè¿›ç¨‹ | è¿½æ±‚å¼€å‘æ•ˆç‡ |
| **C. æ··åˆæ–¹æ¡ˆ** | UI/æ’ä»¶å•è¿›ç¨‹ + AI ç‹¬ç«‹è¿›ç¨‹ | å¹³è¡¡ç¨³å®šæ€§å’Œå¤æ‚åº¦ |

**æˆ‘çš„æ¨è**ï¼š**æ–¹æ¡ˆ C**

- [ ] å¾…å†³ç­–ï¼šæ˜¯å¦åŒæ„æ··åˆæ–¹æ¡ˆï¼Ÿ

---

### 2.2 ç¼–è¾‘å™¨å¼•æ“é€‰æ‹©

> ğŸ“– **å‚è€ƒç ”ç©¶**ï¼š[14-editor-engine.md](./14-editor-engine.md), [15-editor-extension.md](./15-editor-extension.md)

#### 2.2.1 æ–¹æ¡ˆå¯¹æ¯”

| æ–¹é¢ | Monaco Editor | CodeMirror 6 |
|------|--------------|--------------|
| **æ¥æº** | VSCode æ ¸å¿ƒç»„ä»¶æå– | ç‹¬ç«‹å¼€æºé¡¹ç›® |
| **åŒ…å¤§å°** | ~2.5MB | ~500KB |
| **è¯­è¨€æ”¯æŒ** | ä¸°å¯Œï¼ˆç»§æ‰¿ VSCode ç”Ÿæ€ï¼‰ | éœ€è¦é¢å¤–é…ç½® |
| **å¤§æ–‡ä»¶æ€§èƒ½** | ä¼˜ç§€ï¼ˆè™šæ‹Ÿæ¸²æŸ“ï¼‰ | è‰¯å¥½ |
| **ç§»åŠ¨ç«¯æ”¯æŒ** | æœ‰é™ | è‰¯å¥½ |
| **å¯å®šåˆ¶æ€§** | ä¸­ç­‰ | é«˜ |
| **ç¤¾åŒºç”Ÿæ€** | ä¾æ‰˜ VSCode | ç‹¬ç«‹ç”Ÿæ€ |

#### 2.2.2 è®¨è®º

**Monaco çš„ä¼˜åŠ¿**ï¼š
- ä¸ VSCode ç›¸åŒçš„ç¼–è¾‘ä½“éªŒï¼Œç”¨æˆ·ç†Ÿæ‚‰
- ä¸°å¯Œçš„è¯­è¨€æ”¯æŒï¼ˆè¯­æ³•é«˜äº®ã€æ™ºèƒ½æç¤ºï¼‰
- TypeScript/JavaScript æ”¯æŒå¼€ç®±å³ç”¨
- Diff Editorã€å¤šå…‰æ ‡ç­‰é«˜çº§åŠŸèƒ½å®Œå–„

**Monaco çš„åŠ£åŠ¿**ï¼š
- åŒ…ä½“ç§¯å¤§ï¼Œé¦–æ¬¡åŠ è½½æ…¢
- å®šåˆ¶å’Œæ‰©å±•ç›¸å¯¹å›°éš¾
- ç§»åŠ¨ç«¯ä½“éªŒå·®

**CodeMirror 6 çš„ä¼˜åŠ¿**ï¼š
- è½»é‡ï¼ŒåŠ è½½å¿«
- é«˜åº¦å¯å®šåˆ¶ï¼Œæ¨¡å—åŒ–è®¾è®¡
- ç§»åŠ¨ç«¯æ”¯æŒå¥½

**CodeMirror 6 çš„åŠ£åŠ¿**ï¼š
- éœ€è¦æ›´å¤šé…ç½®å·¥ä½œ
- è¯­è¨€æ”¯æŒéœ€è¦é¢å¤–é›†æˆ
- ä¸ VSCode ç”Ÿæ€ä¸å…¼å®¹

#### 2.2.3 é¢„æƒ³è®¾è®¡

```typescript
// Monaco Editor é›†æˆè®¾è®¡
import * as monaco from 'monaco-editor';

class EditorService {
  private editor: monaco.editor.IStandaloneCodeEditor;

  // AI Agent å¯ä»¥ç›´æ¥æ“ä½œç¼–è¾‘å™¨
  applyAIEdit(edit: AICodeEdit): void {
    this.editor.executeEdits('ai-agent', [{
      range: new monaco.Range(...edit.range),
      text: edit.newText,
    }]);
  }

  // é«˜äº® AI ä¿®æ”¹çš„ä»£ç åŒºåŸŸ
  highlightAIChanges(ranges: IRange[]): void {
    this.editor.deltaDecorations([], ranges.map(range => ({
      range,
      options: { className: 'ai-change-highlight' }
    })));
  }
}
```

**ä¸ AI Chat çš„é›†æˆè®¾è®¡**ï¼š
1. AI ç”Ÿæˆä»£ç æ—¶ï¼Œå¯ç›´æ¥åœ¨ç¼–è¾‘å™¨ä¸­é¢„è§ˆ Diff
2. ç”¨æˆ·ç¡®è®¤åä¸€é”®åº”ç”¨æ›´æ”¹
3. AI å¯ä»¥è¯»å–å½“å‰ç¼–è¾‘å™¨å†…å®¹ä½œä¸ºä¸Šä¸‹æ–‡

#### 2.2.4 å†³ç­–ç‚¹

| é€‰é¡¹ | æè¿° |
|------|------|
| **A. Monaco Editor** | ä¸“ä¸šä»£ç ç¼–è¾‘ä½“éªŒï¼Œä¸ VSCode å…¼å®¹ |
| **B. CodeMirror 6** | è½»é‡çµæ´»ï¼Œé€‚åˆå®šåˆ¶åŒ–éœ€æ±‚ |

**æˆ‘çš„æ¨è**ï¼š**æ–¹æ¡ˆ A - Monaco Editor**

ç†ç”±ï¼š
1. äº§å“å®šä½æ˜¯ "AI Coding Agent"ï¼Œä»£ç ç¼–è¾‘æ˜¯æ ¸å¿ƒåŠŸèƒ½
2. Monaco çš„ä¸“ä¸šæ€§æ›´ç¬¦åˆå¼€å‘è€…é¢„æœŸ
3. æœªæ¥å¯å¤ç”¨ VSCode çš„è¯­è¨€æ‰©å±•

- [ ] å¾…å†³ç­–ï¼šç¡®è®¤ä½¿ç”¨ Monaco Editorï¼Ÿ

---

### 2.3 æ’ä»¶ç³»ç»Ÿè®¾è®¡

> ğŸ“– **å‚è€ƒç ”ç©¶**ï¼š[04-plugin-api-design.md](./04-plugin-api-design.md), [05-extension-points.md](./05-extension-points.md), [06-plugin-lifecycle.md](./06-plugin-lifecycle.md)

#### 2.3.1 æ–¹æ¡ˆå¯¹æ¯”

| æ–¹é¢ | VSCode é£æ ¼ | Obsidian é£æ ¼ |
|------|------------|--------------|
| **API å…¥å£** | å‘½åç©ºé—´åˆ†ç»„ `vscode.window` | å•ä¸€ App å¯¹è±¡ |
| **æ‰©å±•ç‚¹** | package.json å£°æ˜å¼ | ä»£ç è¿è¡Œæ—¶æ³¨å†Œ |
| **æ¿€æ´»æ—¶æœº** | æ‡’åŠ è½½ï¼ˆæŒ‰éœ€æ¿€æ´»ï¼‰ | å¯åŠ¨æ—¶å…¨éƒ¨åŠ è½½ |
| **API æ•°é‡** | æ•°ç™¾ä¸ª | å‡ åä¸ªæ ¸å¿ƒ API |
| **å­¦ä¹ æ›²çº¿** | é™¡å³­ | å¹³ç¼“ |

#### 2.3.2 è®¨è®º

**æ˜¯å¦éœ€è¦æ’ä»¶ç³»ç»Ÿï¼Ÿ**

ä½œä¸º MVPï¼Œå¯ä»¥å…ˆä¸æ”¯æŒç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œä¸“æ³¨æ ¸å¿ƒåŠŸèƒ½ã€‚ä½†é¢„ç•™æ’ä»¶æ¶æ„æœ‰ä»¥ä¸‹å¥½å¤„ï¼š
- å†…éƒ¨åŠŸèƒ½ä¹Ÿå¯ä»¥æ’ä»¶åŒ–ï¼Œä¾¿äºæµ‹è¯•å’Œè¿­ä»£
- æœªæ¥å¼€æ”¾ç”Ÿæ€æ—¶æ¶æ„å·²å°±ç»ª
- ç¬¦åˆ"å¯æ‰©å±•"çš„äº§å“å®šä½

**å¦‚æœåšæ’ä»¶ç³»ç»Ÿ**ï¼š
- VSCode æ¨¡å¼é€‚åˆåŠŸèƒ½ä¸°å¯Œã€ç”Ÿæ€åºå¤§çš„åœºæ™¯
- Obsidian æ¨¡å¼é€‚åˆå¿«é€Ÿå¼€å‘ã€ç¤¾åŒºé©±åŠ¨çš„åœºæ™¯

#### 2.3.3 é¢„æƒ³è®¾è®¡

```typescript
// é‡‡ç”¨ Obsidian é£æ ¼çš„ç®€æ´ API
interface NeovatePlugin {
  id: string;
  name: string;

  onload(app: NeovateApp): void | Promise<void>;
  onunload(): void;
}

// App å¯¹è±¡æä¾›æ ¸å¿ƒ API
interface NeovateApp {
  // ç¼–è¾‘å™¨ç›¸å…³
  editor: EditorService;

  // AI Chat ç›¸å…³
  chat: ChatService;

  // UI æ‰©å±•
  ui: {
    addCommand(cmd: Command): void;
    addSidebarPanel(panel: Panel): void;
    addStatusBarItem(item: StatusBarItem): void;
  };

  // è®¾ç½®
  settings: SettingsService;

  // äº‹ä»¶
  on(event: string, callback: Function): void;
}

// ç¤ºä¾‹æ’ä»¶
class MyPlugin implements NeovatePlugin {
  id = 'my-plugin';
  name = 'My Plugin';

  onload(app: NeovateApp) {
    app.ui.addCommand({
      id: 'my-command',
      name: 'Do Something',
      callback: () => { /* ... */ }
    });
  }

  onunload() {}
}
```

**åˆ†é˜¶æ®µè®¡åˆ’**ï¼š
1. **Phase 1 (MVP)**ï¼šå†…éƒ¨æ’ä»¶åŒ–æ¶æ„ï¼Œä¸å¯¹å¤–å¼€æ”¾
2. **Phase 2**ï¼šå¼€æ”¾ APIï¼Œæ”¯æŒç¤¾åŒºæ’ä»¶
3. **Phase 3**ï¼šå»ºè®¾æ’ä»¶å¸‚åœº

#### 2.3.4 å†³ç­–ç‚¹

| é€‰é¡¹ | æè¿° |
|------|------|
| **A. MVP ä¸åšæ’ä»¶** | ä¸“æ³¨æ ¸å¿ƒåŠŸèƒ½ï¼Œåç»­å†è€ƒè™‘ |
| **B. å†…éƒ¨æ’ä»¶åŒ–** | æ¶æ„é¢„ç•™ï¼Œå†…éƒ¨æ¨¡å—æ’ä»¶åŒ–ï¼Œä¸å¯¹å¤–å¼€æ”¾ |
| **C. å®Œæ•´æ’ä»¶ç³»ç»Ÿ** | ä¸€æ­¥åˆ°ä½ï¼Œæ”¯æŒç¬¬ä¸‰æ–¹æ’ä»¶ |

**æˆ‘çš„æ¨è**ï¼š**æ–¹æ¡ˆ B**

ç†ç”±ï¼š
1. å†…éƒ¨æ¨¡å—æ’ä»¶åŒ–å¯ä»¥æé«˜ä»£ç è´¨é‡å’Œå¯æµ‹è¯•æ€§
2. ä¸æ€¥äºå¯¹å¤–å¼€æ”¾ï¼Œé¿å…è¿‡æ—©æ‰¿è¯º API
3. æ¶æ„é¢„ç•™ï¼Œæœªæ¥å¯å¹³æ»‘æ¼”è¿›

- [ ] å¾…å†³ç­–ï¼šMVP é˜¶æ®µçš„æ’ä»¶ç³»ç»Ÿç­–ç•¥ï¼Ÿ

---

### 2.4 UI å¸ƒå±€è®¾è®¡

> ğŸ“– **å‚è€ƒç ”ç©¶**ï¼š[08-ui-layout.md](./08-ui-layout.md), [09-view-system.md](./09-view-system.md)

#### 2.4.1 æ–¹æ¡ˆå¯¹æ¯”

| æ–¹é¢ | VSCode å›ºå®šåŒºåŸŸ | Obsidian çµæ´»åˆ†æ  |
|------|----------------|------------------|
| **å¸ƒå±€ç»“æ„** | ä¾§è¾¹æ  + ç¼–è¾‘å™¨åŒº + é¢æ¿ | ä»»æ„åˆ†æ  + Leaf |
| **ç”¨æˆ·å®šåˆ¶** | æœ‰é™ï¼ˆæ‹–æ‹½å®½åº¦/éšè—ï¼‰ | é«˜åº¦çµæ´»ï¼ˆä»»æ„åˆ†å‰²ï¼‰ |
| **å®ç°å¤æ‚åº¦** | ä¸­ç­‰ | é«˜ |
| **è®¤çŸ¥è´Ÿæ‹…** | ä½ï¼ˆå›ºå®šæ¨¡å¼ï¼‰ | ä¸­ï¼ˆéœ€è¦å­¦ä¹ ï¼‰ |

#### 2.4.2 è®¨è®º

**äº§å“åœºæ™¯åˆ†æ**ï¼š
- ä¸»è¦åœºæ™¯ï¼šå·¦è¾¹ AI Chatï¼Œå³è¾¹ Monaco Editor
- æ¬¡è¦åœºæ™¯ï¼šæ–‡ä»¶æ ‘ã€æœç´¢ã€è®¾ç½®ç­‰è¾…åŠ©é¢æ¿
- ç”¨æˆ·éœ€æ±‚ï¼šå¿«é€Ÿåœ¨å¯¹è¯å’Œä»£ç ä¹‹é—´åˆ‡æ¢

**çµæ´» vs å›ºå®š**ï¼š
- è¿‡åº¦çµæ´»å¢åŠ ç”¨æˆ·è®¤çŸ¥è´Ÿæ‹…
- å›ºå®šå¸ƒå±€é™ä½å­¦ä¹ æˆæœ¬
- å¯ä»¥å›ºå®šä¸ºä¸»ï¼Œå°èŒƒå›´å¯è°ƒ

#### 2.4.3 é¢„æƒ³è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [èœå•æ ]                                              [â”€][â–¡][Ã—] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚        â”‚ â”‚                  â”‚ â”‚                          â”‚ â”‚
â”‚ â”‚  ä¾§è¾¹  â”‚ â”‚    AI Chat       â”‚ â”‚    Monaco Editor         â”‚ â”‚
â”‚ â”‚  æ     â”‚ â”‚                  â”‚ â”‚                          â”‚ â”‚
â”‚ â”‚ (å¯é€‰) â”‚ â”‚  - å¯¹è¯å†å²      â”‚ â”‚  - ä»£ç ç¼–è¾‘              â”‚ â”‚
â”‚ â”‚        â”‚ â”‚  - è¾“å…¥æ¡†        â”‚ â”‚  - Diff é¢„è§ˆ             â”‚ â”‚
â”‚ â”‚ æ–‡ä»¶æ ‘ â”‚ â”‚  - ä»£ç é¢„è§ˆ      â”‚ â”‚  - å¤š Tab               â”‚ â”‚
â”‚ â”‚ æœç´¢   â”‚ â”‚                  â”‚ â”‚                          â”‚ â”‚
â”‚ â”‚        â”‚ â”‚                  â”‚ â”‚                          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [çŠ¶æ€æ ]  AI: Ready | æ–‡ä»¶: main.ts | Ln 42, Col 8          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**äº¤äº’è®¾è®¡**ï¼š
1. ä¾§è¾¹æ å¯æ”¶èµ·/å±•å¼€
2. Chat å’Œ Editor ä¹‹é—´çš„åˆ†éš”çº¿å¯æ‹–åŠ¨
3. Chat å¯å…¨å±ï¼ˆä¸“æ³¨å¯¹è¯æ—¶ï¼‰
4. Editor å¯å…¨å±ï¼ˆä¸“æ³¨ç¼–ç æ—¶ï¼‰

#### 2.4.4 å†³ç­–ç‚¹

| é€‰é¡¹ | æè¿° |
|------|------|
| **A. å›ºå®šä¸‰æ ** | ä¾§è¾¹æ  + Chat + Editorï¼Œæ¯”ä¾‹å¯è°ƒ |
| **B. çµæ´»åˆ†æ ** | ç”¨æˆ·å¯è‡ªç”±åˆ†å‰²å’Œé‡æ’ |
| **C. æ¨¡å¼åˆ‡æ¢** | é¢„è®¾å‡ ç§å¸ƒå±€æ¨¡å¼ä¾›åˆ‡æ¢ |

**æˆ‘çš„æ¨è**ï¼š**æ–¹æ¡ˆ A**

ç†ç”±ï¼šåœºæ™¯æ˜ç¡®ï¼ˆChat + Editorï¼‰ï¼Œå›ºå®šå¸ƒå±€é™ä½å¤æ‚åº¦

- [ ] å¾…å†³ç­–ï¼šUI å¸ƒå±€ç­–ç•¥ï¼Ÿ

---

### 2.5 çŠ¶æ€ç®¡ç†

> ğŸ“– **å‚è€ƒç ”ç©¶**ï¼š[17-state-management.md](./17-state-management.md)

#### 2.5.1 æ–¹æ¡ˆå¯¹æ¯”

| æ–¹é¢ | VSCode æœåŠ¡æ³¨å…¥ | Obsidian å…¨å±€ App | ç°ä»£çŠ¶æ€åº“ |
|------|----------------|------------------|-----------|
| **æ¨¡å¼** | ä¾èµ–æ³¨å…¥ | å…¨å±€å•ä¾‹ | Store Pattern |
| **ä»£è¡¨** | inversify | app.workspace | Zustand/Jotai |
| **å¤æ‚åº¦** | é«˜ | ä½ | ä¸­ |
| **å¯æµ‹è¯•æ€§** | é«˜ | ä½ | é«˜ |
| **ç±»å‹å®‰å…¨** | é«˜ | ä¸­ | é«˜ |

#### 2.5.2 è®¨è®º

**ä¸ºä»€ä¹ˆä¸ç”¨ Redux**ï¼š
- æ ·æ¿ä»£ç å¤ªå¤š
- å¯¹äºä¸­ç­‰è§„æ¨¡åº”ç”¨è¿‡äºå¤æ‚

**Zustand çš„ä¼˜åŠ¿**ï¼š
- æç®€ APIï¼Œå­¦ä¹ æˆæœ¬ä½
- ä¸ React æ— ç¼é›†æˆ
- æ”¯æŒæŒä¹…åŒ–ã€devtools
- ç±»å‹æ¨æ–­å‹å¥½

#### 2.5.3 é¢„æƒ³è®¾è®¡

```typescript
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

// Chat çŠ¶æ€
interface ChatState {
  conversations: Conversation[];
  activeConversationId: string | null;
  isStreaming: boolean;

  // Actions
  sendMessage: (content: string) => Promise<void>;
  createConversation: () => void;
  deleteConversation: (id: string) => void;
}

export const useChatStore = create<ChatState>()(
  persist(
    (set, get) => ({
      conversations: [],
      activeConversationId: null,
      isStreaming: false,

      sendMessage: async (content) => {
        set({ isStreaming: true });
        // AI API è°ƒç”¨...
        set({ isStreaming: false });
      },
      // ...
    }),
    { name: 'chat-storage' }
  )
);

// Editor çŠ¶æ€
interface EditorState {
  openFiles: FileTab[];
  activeFileId: string | null;
  // ...
}

export const useEditorStore = create<EditorState>()(...);
```

#### 2.5.4 å†³ç­–ç‚¹

| é€‰é¡¹ | æè¿° |
|------|------|
| **A. ä¾èµ–æ³¨å…¥** | ç±» VSCodeï¼Œé€‚åˆå¤§å‹å¤æ‚åº”ç”¨ |
| **B. å…¨å±€çŠ¶æ€** | ç±» Obsidianï¼Œç®€å•ç›´æ¥ |
| **C. Zustand** | ç°ä»£æ–¹æ¡ˆï¼Œå¹³è¡¡ç®€æ´å’Œå¯ç»´æŠ¤æ€§ |

**æˆ‘çš„æ¨è**ï¼š**æ–¹æ¡ˆ C - Zustand**

- [ ] å¾…å†³ç­–ï¼šçŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼Ÿ

---

### 2.6 AI é›†æˆè®¾è®¡

> ğŸ“– **å‚è€ƒç ”ç©¶**ï¼š[21-language-service.md](./21-language-service.md), [34-vscode-specific.md](./34-vscode-specific.md)

#### 2.6.1 è®¨è®º

è¿™æ˜¯æˆ‘ä»¬äº§å“çš„æ ¸å¿ƒå·®å¼‚åŒ–ï¼ŒVSCode å’Œ Obsidian çš„ç ”ç©¶ä»…ä¾›å‚è€ƒæ¶æ„è®¾è®¡ï¼ŒAI é›†æˆéœ€è¦åˆ›æ–°ã€‚

**æ ¸å¿ƒé—®é¢˜**ï¼š
1. AI å¦‚ä½•ç†è§£ä»£ç ä¸Šä¸‹æ–‡ï¼Ÿ
2. AI å¦‚ä½•ä¸ç¼–è¾‘å™¨äº¤äº’ï¼Ÿ
3. å¦‚ä½•å¤„ç† AI æ‰§è¡Œå‘½ä»¤çš„å®‰å…¨æ€§ï¼Ÿ

#### 2.6.2 é¢„æƒ³è®¾è®¡

```typescript
// AI Agent èƒ½åŠ›å®šä¹‰
interface AIAgent {
  // å¯¹è¯
  chat(message: string, context: CodeContext): AsyncIterable<string>;

  // ä»£ç æ“ä½œ
  generateCode(prompt: string): Promise<CodeEdit>;
  explainCode(code: string): Promise<string>;
  refactorCode(code: string, instruction: string): Promise<CodeEdit>;

  // å‘½ä»¤æ‰§è¡Œï¼ˆéœ€è¦ç”¨æˆ·ç¡®è®¤ï¼‰
  executeCommand(command: string): Promise<CommandResult>;

  // ä»£ç åˆ†æ
  analyzeError(error: Error, code: string): Promise<FixSuggestion>;
}

// ä¸Šä¸‹æ–‡æ”¶é›†
interface CodeContext {
  currentFile: string;
  currentSelection: string;
  openFiles: string[];
  projectStructure: FileTree;
  recentChanges: Change[];
}

// å®‰å…¨æ‰§è¡Œ
class SecureExecutor {
  async execute(command: string): Promise<CommandResult> {
    // 1. å±•ç¤ºç»™ç”¨æˆ·ç¡®è®¤
    const confirmed = await this.showConfirmDialog(command);
    if (!confirmed) return { cancelled: true };

    // 2. åœ¨æ²™ç®±ä¸­æ‰§è¡Œ
    return this.sandbox.run(command);
  }
}
```

**å…³é”®è®¾è®¡å†³ç­–**ï¼š
1. **ä¸Šä¸‹æ–‡çª—å£**ï¼šè‡ªåŠ¨æ”¶é›†ç›¸å…³ä»£ç ä½œä¸º AI ä¸Šä¸‹æ–‡
2. **æµå¼å“åº”**ï¼šæ‰“å­—æœºæ•ˆæœå±•ç¤º AI å›å¤
3. **ä»£ç  Diff**ï¼šAI ä¿®æ”¹ä»¥ Diff å½¢å¼å±•ç¤ºï¼Œç”¨æˆ·ç¡®è®¤ååº”ç”¨
4. **å‘½ä»¤æ‰§è¡Œ**ï¼šéœ€è¦ç”¨æˆ·æ˜ç¡®ç¡®è®¤

#### 2.6.3 å†³ç­–ç‚¹

| é€‰é¡¹ | æè¿° |
|------|------|
| **A. çº¯å¯¹è¯æ¨¡å¼** | AI åªèƒ½å¯¹è¯ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹ä»£ç  |
| **B. å»ºè®®æ¨¡å¼** | AI å»ºè®®ä¿®æ”¹ï¼Œç”¨æˆ·é€ä¸€ç¡®è®¤ |
| **C. Agent æ¨¡å¼** | AI å¯è‡ªä¸»æ‰§è¡Œå¤šæ­¥æ“ä½œï¼ˆæœ‰ç¡®è®¤æœºåˆ¶ï¼‰ |

**æˆ‘çš„æ¨è**ï¼š**æ–¹æ¡ˆ C - Agent æ¨¡å¼**

ç†ç”±ï¼šè¿™æ˜¯äº§å“æ ¸å¿ƒç«äº‰åŠ›ï¼Œä½†éœ€è¦è®¾è®¡å¥½ç¡®è®¤å’Œå›æ»šæœºåˆ¶

- [ ] å¾…å†³ç­–ï¼šAI äº¤äº’æ¨¡å¼ï¼Ÿ

---

### 2.7 å®‰å…¨æ¨¡å‹

> ğŸ“– **å‚è€ƒç ”ç©¶**ï¼š[28-security-model.md](./28-security-model.md)

#### 2.7.1 æ–¹æ¡ˆå¯¹æ¯”

| æ–¹é¢ | VSCode | Obsidian |
|------|--------|----------|
| **æ’ä»¶æ²™ç®±** | è¿›ç¨‹éš”ç¦» | æœ€å°åŒ–æ²™ç®± |
| **æƒé™ç³»ç»Ÿ** | Workspace Trust | æ— ç»†ç²’åº¦æƒé™ |
| **å®¡æ ¸æœºåˆ¶** | è‡ªåŠ¨ + äººå·¥ | ç¤¾åŒºå®¡æ ¸ |

#### 2.7.2 è®¨è®º

**AI Agent çš„å®‰å…¨é£é™©**ï¼š
1. AI å¯èƒ½æ‰§è¡Œæ¶æ„å‘½ä»¤
2. AI å¯èƒ½è¯»å–æ•æ„Ÿæ–‡ä»¶
3. æ’ä»¶å¯èƒ½çªƒå–å¯¹è¯å†…å®¹

**å®‰å…¨è®¾è®¡åŸåˆ™**ï¼š
1. **æœ€å°æƒé™**ï¼šé»˜è®¤é™åˆ¶ï¼Œéœ€è¦æ—¶è¯·æ±‚
2. **ç”¨æˆ·ç¡®è®¤**ï¼šæ•æ„Ÿæ“ä½œéœ€æ˜ç¡®æˆæƒ
3. **å¯è¿½æº¯**ï¼šæ‰€æœ‰æ“ä½œæœ‰æ—¥å¿—

#### 2.7.3 é¢„æƒ³è®¾è®¡

```typescript
// æƒé™ç³»ç»Ÿè®¾è®¡
enum Permission {
  READ_FILE = 'read_file',
  WRITE_FILE = 'write_file',
  EXECUTE_COMMAND = 'execute_command',
  NETWORK_ACCESS = 'network_access',
}

interface PermissionRequest {
  permission: Permission;
  resource?: string;  // æ–‡ä»¶è·¯å¾„æˆ–å‘½ä»¤
  reason: string;
}

class PermissionManager {
  private grants: Map<string, Permission[]> = new Map();

  async request(req: PermissionRequest): Promise<boolean> {
    // æ£€æŸ¥æ˜¯å¦å·²æˆæƒ
    if (this.isGranted(req)) return true;

    // è¯·æ±‚ç”¨æˆ·æˆæƒ
    return this.showPermissionDialog(req);
  }
}
```

**MVP é˜¶æ®µç®€åŒ–**ï¼š
- æš‚ä¸åšç»†ç²’åº¦æƒé™ç³»ç»Ÿ
- AI æ‰§è¡Œå‘½ä»¤éœ€ç”¨æˆ·ç¡®è®¤
- æ’ä»¶æš‚ä¸å¯¹å¤–å¼€æ”¾

#### 2.7.4 å†³ç­–ç‚¹

| é€‰é¡¹ | æè¿° |
|------|------|
| **A. å®Œæ•´æƒé™ç³»ç»Ÿ** | ç»†ç²’åº¦æƒé™æ§åˆ¶ï¼ˆå¼€å‘æˆæœ¬é«˜ï¼‰ |
| **B. ç®€å•ç¡®è®¤æœºåˆ¶** | æ•æ„Ÿæ“ä½œå¼¹çª—ç¡®è®¤ |
| **C. ä¿¡ä»»æ¨¡å¼** | ç±» Obsidianï¼Œä¿¡ä»»ç”¨æˆ·å®‰è£…çš„å†…å®¹ |

**æˆ‘çš„æ¨è**ï¼š**MVP é‡‡ç”¨æ–¹æ¡ˆ Bï¼Œåç»­æ¼”è¿›åˆ°æ–¹æ¡ˆ A**

- [ ] å¾…å†³ç­–ï¼šå®‰å…¨æ¨¡å‹ç­–ç•¥ï¼Ÿ

---

### 2.8 å¹³å°æ”¯æŒ

> ğŸ“– **å‚è€ƒç ”ç©¶**ï¼š[31-multi-platform.md](./31-multi-platform.md)

#### 2.8.1 æ–¹æ¡ˆå¯¹æ¯”

| å¹³å° | VSCode | Obsidian | å¼€å‘æˆæœ¬ |
|------|--------|----------|----------|
| **Windows** | âœ… | âœ… | Electron åŸç”Ÿæ”¯æŒ |
| **macOS** | âœ… | âœ… | Electron åŸç”Ÿæ”¯æŒ |
| **Linux** | âœ… | âœ… | Electron åŸç”Ÿæ”¯æŒ |
| **Web** | âœ… vscode.dev | âŒ | éœ€è¦é€‚é… |
| **iOS** | âŒ | âœ… | éœ€è¦ React Native / åŸç”Ÿ |
| **Android** | âŒ | âœ… | éœ€è¦ React Native / åŸç”Ÿ |

#### 2.8.2 é¢„æƒ³è®¾è®¡

**Phase 1 (MVP)**ï¼š
- æ¡Œé¢ä¸‰ç«¯ï¼ˆWindows / macOS / Linuxï¼‰
- Electron å¼€ç®±å³ç”¨

**Phase 2ï¼ˆå¯é€‰ï¼‰**ï¼š
- Web ç‰ˆæœ¬ï¼ˆå¯å…±äº«æ ¸å¿ƒä»£ç ï¼‰
- éœ€è¦å¤„ç†ï¼šæ–‡ä»¶ç³»ç»Ÿã€ç»ˆç«¯ã€AI åç«¯

**Phase 3ï¼ˆå¯é€‰ï¼‰**ï¼š
- ç§»åŠ¨ç«¯ï¼ˆé…å¥— Appï¼Œè½»é‡åŠŸèƒ½ï¼‰

#### 2.8.3 å†³ç­–ç‚¹

| é€‰é¡¹ | æè¿° |
|------|------|
| **A. ä»…æ¡Œé¢ç«¯** | ä¸“æ³¨ Electron ä¸‰å¹³å° |
| **B. æ¡Œé¢ + Web** | å¢åŠ æµè§ˆå™¨è®¿é—®èƒ½åŠ› |
| **C. å…¨å¹³å°** | æ¡Œé¢ + Web + ç§»åŠ¨ |

**æˆ‘çš„æ¨è**ï¼š**æ–¹æ¡ˆ A**

ç†ç”±ï¼šMVP é˜¶æ®µä¸“æ³¨æ ¸å¿ƒå¹³å°ï¼ŒWeb å’Œç§»åŠ¨ç«¯å¾…äº§å“éªŒè¯åè€ƒè™‘

- [ ] å¾…å†³ç­–ï¼šå¹³å°æ”¯æŒèŒƒå›´ï¼Ÿ

---

## 3. æ¨èæ¶æ„æ±‡æ€»

| å†³ç­–é¢†åŸŸ | æ¨èæ–¹æ¡ˆ | ç†ç”± |
|----------|----------|------|
| **è¿›ç¨‹æ¶æ„** | æ··åˆï¼ˆUI å•è¿›ç¨‹ + AI ç‹¬ç«‹ï¼‰ | å¹³è¡¡ç®€å•æ€§å’Œç¨³å®šæ€§ |
| **ç¼–è¾‘å™¨å¼•æ“** | Monaco Editor | ä¸“ä¸šä»£ç ç¼–è¾‘ä½“éªŒ |
| **æ’ä»¶ç³»ç»Ÿ** | å†…éƒ¨æ’ä»¶åŒ–ï¼Œæš‚ä¸å¯¹å¤– | é¢„ç•™æ‰©å±•èƒ½åŠ› |
| **UI å¸ƒå±€** | å›ºå®šä¸‰æ  | åœºæ™¯æ˜ç¡® |
| **çŠ¶æ€ç®¡ç†** | Zustand | ç®€æ´ç°ä»£ |
| **AI äº¤äº’** | Agent æ¨¡å¼ + ç¡®è®¤æœºåˆ¶ | äº§å“æ ¸å¿ƒå·®å¼‚ |
| **å®‰å…¨æ¨¡å‹** | ç®€å•ç¡®è®¤æœºåˆ¶ | MVP å…ˆç®€åç¹ |
| **å¹³å°æ”¯æŒ** | æ¡Œé¢ä¸‰ç«¯ | ä¸“æ³¨æ ¸å¿ƒ |

---

## 4. å¾…å†³ç­–äº‹é¡¹æ¸…å•

| # | å†³ç­–ç‚¹ | é€‰é¡¹ | å‚è€ƒç« èŠ‚ |
|---|--------|------|----------|
| 1 | è¿›ç¨‹æ¶æ„ | A.å¤šè¿›ç¨‹ / B.å•è¿›ç¨‹ / **C.æ··åˆ** | `01-process-architecture.md` |
| 2 | ç¼–è¾‘å™¨å¼•æ“ | **A.Monaco** / B.CodeMirror | `14-editor-engine.md` |
| 3 | æ’ä»¶ç­–ç•¥ | A.ä¸åš / **B.å†…éƒ¨åŒ–** / C.å®Œæ•´ç³»ç»Ÿ | `04-plugin-api-design.md` |
| 4 | UI å¸ƒå±€ | **A.å›ºå®š** / B.çµæ´» / C.æ¨¡å¼åˆ‡æ¢ | `08-ui-layout.md` |
| 5 | çŠ¶æ€ç®¡ç† | A.DI / B.å…¨å±€ / **C.Zustand** | `17-state-management.md` |
| 6 | AI äº¤äº’æ¨¡å¼ | A.å¯¹è¯ / B.å»ºè®® / **C.Agent** | `21-language-service.md` |
| 7 | å®‰å…¨æ¨¡å‹ | A.å®Œæ•´ / **B.ç¡®è®¤æœºåˆ¶** / C.ä¿¡ä»» | `28-security-model.md` |
| 8 | å¹³å°èŒƒå›´ | **A.æ¡Œé¢** / B.+Web / C.å…¨å¹³å° | `31-multi-platform.md` |

---

## 5. é™„å½•

### 5.1 ç ”ç©¶æ–‡æ¡£å®Œæ•´åˆ—è¡¨

```
research/vscode-vs-obsidian/
â”œâ”€â”€ 00-index.md                 # æ¦‚è¿°
â”œâ”€â”€ 01-process-architecture.md  # è¿›ç¨‹æ¶æ„
â”œâ”€â”€ 02-module-system.md         # æ¨¡å—ç³»ç»Ÿ
â”œâ”€â”€ 03-ipc-communication.md     # IPC é€šä¿¡
â”œâ”€â”€ 04-plugin-api-design.md     # æ’ä»¶ API
â”œâ”€â”€ 05-extension-points.md      # æ‰©å±•ç‚¹æœºåˆ¶
â”œâ”€â”€ 06-plugin-lifecycle.md      # æ’ä»¶ç”Ÿå‘½å‘¨æœŸ
â”œâ”€â”€ 07-plugin-communication.md  # æ’ä»¶é—´é€šä¿¡
â”œâ”€â”€ 08-ui-layout.md             # UI å¸ƒå±€
â”œâ”€â”€ 09-view-system.md           # è§†å›¾ç³»ç»Ÿ
â”œâ”€â”€ 10-theme-system.md          # ä¸»é¢˜ç³»ç»Ÿ
â”œâ”€â”€ 11-command-system.md        # å‘½ä»¤ç³»ç»Ÿ
â”œâ”€â”€ 12-keybinding-system.md     # å¿«æ·é”®
â”œâ”€â”€ 13-context-menu.md          # å³é”®èœå•
â”œâ”€â”€ 14-editor-engine.md         # ç¼–è¾‘å™¨å¼•æ“
â”œâ”€â”€ 15-editor-extension.md      # ç¼–è¾‘å™¨æ‰©å±•
â”œâ”€â”€ 16-decoration-system.md     # è£…é¥°ç³»ç»Ÿ
â”œâ”€â”€ 17-state-management.md      # çŠ¶æ€ç®¡ç†
â”œâ”€â”€ 18-settings-system.md       # è®¾ç½®ç³»ç»Ÿ
â”œâ”€â”€ 19-file-system.md           # æ–‡ä»¶ç³»ç»Ÿ
â”œâ”€â”€ 20-cache-persistence.md     # ç¼“å­˜æŒä¹…åŒ–
â”œâ”€â”€ 21-language-service.md      # è¯­è¨€æœåŠ¡
â”œâ”€â”€ 22-debug-capability.md      # è°ƒè¯•åŠŸèƒ½
â”œâ”€â”€ 23-terminal-integration.md  # ç»ˆç«¯é›†æˆ
â”œâ”€â”€ 24-search-capability.md     # æœç´¢åŠŸèƒ½
â”œâ”€â”€ 25-version-control.md       # ç‰ˆæœ¬æ§åˆ¶
â”œâ”€â”€ 26-plugin-marketplace.md    # æ’ä»¶å¸‚åœº
â”œâ”€â”€ 27-developer-experience.md  # å¼€å‘è€…ä½“éªŒ
â”œâ”€â”€ 28-security-model.md        # å®‰å…¨æ¨¡å‹
â”œâ”€â”€ 29-startup-performance.md   # å¯åŠ¨æ€§èƒ½
â”œâ”€â”€ 30-runtime-performance.md   # è¿è¡Œæ—¶æ€§èƒ½
â”œâ”€â”€ 31-multi-platform.md        # å¤šå¹³å°æ”¯æŒ
â”œâ”€â”€ 32-internationalization.md  # å›½é™…åŒ–
â”œâ”€â”€ 33-accessibility.md         # æ— éšœç¢
â”œâ”€â”€ 34-vscode-specific.md       # VSCode ç‰¹è‰²
â””â”€â”€ 35-obsidian-specific.md     # Obsidian ç‰¹è‰²
```

### 5.2 æœ¯è¯­è¡¨

| æœ¯è¯­ | è§£é‡Š |
|------|------|
| **Electron** | åŸºäº Chromium + Node.js çš„æ¡Œé¢åº”ç”¨æ¡†æ¶ |
| **Monaco** | VSCode ä½¿ç”¨çš„ä»£ç ç¼–è¾‘å™¨æ ¸å¿ƒ |
| **IPC** | Inter-Process Communicationï¼Œè¿›ç¨‹é—´é€šä¿¡ |
| **LSP** | Language Server Protocolï¼Œè¯­è¨€æœåŠ¡åè®® |
| **MVP** | Minimum Viable Productï¼Œæœ€å°å¯è¡Œäº§å“ |
